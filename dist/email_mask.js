!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("email_mask",[],t):"object"==typeof exports?exports.email_mask=t():e.email_mask=t()}(self,(function(){return(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.r(t),e.d(t,{init:()=>l});var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t.name?t.name:"",this.plc=t.plc?t.plc:"_",this.valid_symbols=t.valid_regx?t.valid_regx:/[0-9A-Za-z@]/,this.min_length=1,this.max_length=99,this.next_step_symbols=t.next_step_symbols?t.next_step_symbols:[],this.separator=t.separator?t.separator:"",this.val=[];for(var n=0;n<this.max_length;n++)this.val[n]=" "}var t,r;return t=e,(r=[{key:"set",value:function(e,t){this.val.splice(e,0,t)}},{key:"get_symbol",value:function(){}},{key:"remove",value:function(e){this.val.splice(e-1,1)}},{key:"valid",value:function(e){return!(e.length>1||-1==e.search(this.valid_symbols))}},{key:"print_value",value:function(){for(var e="",t=0;t<this.val.length;t++)" "!==this.val[t]&&(e+=this.val[t]);var n=this.min_length-e.length;return n>0&&(e+=this.plc.repeat(n)),e+this.separator}},{key:"clear_value",value:function(){for(var e="",t=0;t<this.val.length;t++)" "!==this.val[t]&&(e+=this.val[t]);return e}},{key:"length",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e?this.print_value().length:this.clear_value().length}},{key:"check_next_lvl",value:function(e,t){return-1!==this.next_step_symbols.indexOf(e)&&this.length()==t&&this.length()>=this.min_length}}])&&n(t.prototype,r),e}();function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.el=t.el}var t,n;return t=e,(n=[{key:"get",value:function(){var e={start:this.el.selectionStart,end:this.el.selectionEnd,selected:!1};return 0!==this.el.selectionStart&&0!==this.el.selectionEnd&&1!=this.el.selectionStart/this.el.selectionEnd&&(e.selected=!0),e}},{key:"set",value:function(e){this.el.setSelectionRange(e,e)}}])&&s(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.input=t.input,this.caret=new i({el:t.input}),this.steps=[],this.steps[0]=new r({separator:"@",next_step_symbols:["@"," "]}),this.steps[1]=new r({separator:".",next_step_symbols:["."," "]}),this.steps[2]=new r({}),this.init()}var t,n;return t=e,(n=[{key:"foreach_steps",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=0;t<this.steps.length;t++)e(this.steps[t],t)}},{key:"find_step",value:function(){var e=this.caret.get(),t=[],n=0;return this.foreach_steps((function(e,n){var r;r=n>0?e.length(!0)+t[n-1]:e.length(!0),t[n]=r})),e.start>=0&&e.start<t[0]?(console.log("step 1"),n=0):e.start>=t[0]&&e.start<t[1]?(console.log("step 2"),n=1):e.start>=t[1]&&(console.log("step 3"),n=2),n}},{key:"find_position_in_step",value:function(){var e=this.caret.get(),t=this.find_step(),n=0;if(0==t)n=e.start;else{var r=0;this.foreach_steps((function(e,n){n<t&&(r+=e.length(!0))})),n=e.start-r}return n}},{key:"get_print_value",value:function(){var e="";return this.foreach_steps((function(t){e+=t.print_value()})),e}},{key:"render",value:function(){this.input.value=this.get_print_value()}},{key:"print_placeholder",value:function(){var e=0;this.foreach_steps((function(t){e+=t.length()})),0==e&&(this.input.placeholder=this.get_print_value())}},{key:"clear_placeholder",value:function(){this.input.placeholder=""}},{key:"init",value:function(){var e=this;e.input.addEventListener("click",(function(e){})),e.input.addEventListener("input",(function(e){return e.preventDefault(),!1})),e.input.addEventListener("mouseover",(function(t){t.preventDefault(),e.print_placeholder()})),e.input.addEventListener("mouseout",(function(t){t.preventDefault(),e.clear_placeholder()})),e.input.addEventListener("keydown",(function(t){t.preventDefault();var n=t.key,r=e.find_step(),s=e.caret.get(),i=e.find_position_in_step();if(s.selected)return!1;switch(t.keyCode){case 8:e.steps[r].remove(i),e.render(),e.caret.set(s.start-1);break;case 39:e.render(),e.caret.set(s.start+1);break;case 37:e.render(),e.caret.set(s.start-1);break;default:if(e.steps[r].check_next_lvl(n,i))return console.log("next lvl"),e.render(),e.caret.set(s.start+1),!1;if(!e.steps[r].valid(n))return!1;var a=1;console.log(e.steps[r].length()),console.log(i),0==e.steps[r].length()&&i>0&&(a=0,i=0,console.log("fix")),e.steps[r].set(i,n),e.render(),e.caret.set(s.start+a)}return!1}))}}])&&a(t.prototype,n),e}();return t})()}));