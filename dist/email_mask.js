!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("email_mask",[],e):"object"==typeof exports?exports.email_mask=e():t.email_mask=e()}(self,(function(){return(()=>{"use strict";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.r(e),t.d(e,{init:()=>l});var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e.name?e.name:"",this.plc=e.plc?e.plc:"_",this.valid_regx=e.valid_regx?e.valid_regx:/[0-9A-Za-z]/,this.min_length=e.min_length?e.min_length:1,this.max_length=e.max_length?e.max_length:99,this.next_step_symbols=e.next_step_symbols?e.next_step_symbols:[],this.separator=e.separator?e.separator:"",this.val=[];for(var n=0;n<this.max_length;n++)this.val[n]=" "}var e,r;return e=t,(r=[{key:"set",value:function(t,e){this.val.splice(t,0,e)}},{key:"set_string",value:function(t){for(var e=t.split(""),n=0;n<e.length;n++){if(!this.valid(e[n]))return!1;this.val[n]=e[n]}return!0}},{key:"remove",value:function(t){this.val.splice(t,1)}},{key:"valid",value:function(t){return!(t.length>1||-1==t.search(this.valid_regx))}},{key:"print_value",value:function(){for(var t="",e=0;e<this.val.length;e++)" "!==this.val[e]&&(t+=this.val[e]);var n=this.min_length-t.length;return n>0&&(t+=this.plc.repeat(n)),t+this.separator}},{key:"clear_value",value:function(){for(var t="",e=0;e<this.val.length;e++)" "!==this.val[e]&&(t+=this.val[e]);return t}},{key:"length",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return t?this.print_value().length:this.clear_value().length}},{key:"check_next_lvl",value:function(t,e){return-1!==this.next_step_symbols.indexOf(t)&&this.length()==e&&this.length()>=this.min_length}}])&&n(e.prototype,r),t}();function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.el=e.el,this.start=0,this.end=0,this.select=!1,this.init()}var e,n;return e=t,(n=[{key:"up",value:function(){return this.start=this.el.selectionStart,this.end=this.el.selectionEnd,0===this.start&&0===this.end||1==this.start/this.end?(this.select=!1,!1):(this.select=!0,!1)}},{key:"set",value:function(t,e){var n=this;n.el.style.caretColor="transparent";var r=n.el.style.color||"#000";/Android/i.test(navigator.userAgent)?setTimeout((function(){n.el.setSelectionRange(t,e),n.el.style.caretColor=r}),0):(n.el.setSelectionRange(t,e),n.el.style.caretColor=r)}},{key:"init",value:function(){var t=this;t.el.addEventListener("input",(function(e){if(t.select)return!1;t.up()})),t.el.addEventListener("select",(function(e){e.preventDefault(),t.up()}))}}])&&a(e.prototype,n),t}();function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.input=e,this.caret=new i({el:e}),this.steps=[],this.status=!0,this.steps[0]=new r({separator:"@",next_step_symbols:["@"," "],valid_regx:/[0-9A-Za-z!#$%&'*+/./=?^_`{|}~\-]/}),this.steps[1]=new r({separator:".",next_step_symbols:["."," "]}),this.steps[2]=new r({}),this.init()}var e,n;return e=t,(n=[{key:"foreach_steps",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=0;e<this.steps.length;e++)t(this.steps[e],e)}},{key:"find_step",value:function(t){var e=[],n=0;return this.foreach_steps((function(t,n){var r;r=n>0?t.length(!0)+e[n-1]:t.length(!0),e[n]=r})),t>=0&&t<e[0]?n=0:t>=e[0]&&t<e[1]?n=1:t>=e[1]&&(n=2),n}},{key:"find_position_in_step",value:function(t,e){if(0==e)return t;var n=0;return this.foreach_steps((function(t,r){r<e&&(n+=t.length(!0))})),t-n}},{key:"value_length",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=0;return this.foreach_steps((function(n){e+=n.length(t)})),e}},{key:"get_print_value",value:function(){var t="";return this.foreach_steps((function(e){t+=e.print_value()})),t}},{key:"render",value:function(){this.input.value=this.get_print_value()}},{key:"split_paste_string",value:function(t){var e=[],n="";return-1!==t.search(/@/)&&(n=t.split("@"),e[0]=n[0],-1!==n[1].search(/\./))&&(n=n[1].split("."),e[1]=n[0],e[2]=n[1],e)}},{key:"print_placeholder",value:function(){0==this.value_length()&&(this.input.placeholder=this.get_print_value())}},{key:"clear_placeholder",value:function(){0==this.value_length()&&(this.input.placeholder="")}},{key:"init",value:function(){var t=this;t.input.setAttribute("autocorrect","off"),t.input.setAttribute("autocapitalize","off"),t.input.setAttribute("autocomplete","off"),t.input.addEventListener("paste",(function(e){e.preventDefault();var n=(e.clipboardData||window.clipboardData).getData("text");n.replace(/\s+/g," ").trim();var r=t.split_paste_string(n);if(r)for(var a=0;a<r.length;a++)if(!t.steps[a].set_string(r[a]))return!1;t.render()})),t.input.addEventListener("input",(function(e){if(e.preventDefault(),!t.status)return t.render(),!1;if(t.caret.select)return t.render(),t.caret.set(t.caret.start,t.caret.start),t.caret.up(),!1;var n,r,a=e.data;switch(a){case null:r=t.find_step(t.caret.start+1),n=t.find_position_in_step(t.caret.start+1,r),t.steps[r].remove(n-1),t.render(),t.caret.set(t.caret.start,t.caret.start);break;default:if(r=t.find_step(t.caret.start-1),n=t.find_position_in_step(t.caret.start-1,r),t.steps[r].check_next_lvl(a,n))return t.render(),t.caret.set(t.caret.start,t.caret.start),!1;if(" "==a&&(t.render(),t.caret.set(t.caret.start+1,t.caret.start+1)),!t.steps[r].valid(a))return t.render(),t.caret.set(t.caret.start-1,t.caret.start-1),!1;0==t.steps[r].length()&&n>0&&(n=0,t.caret.start-=1),t.steps[r].set(n,a),t.render(),t.caret.set(t.caret.start,t.caret.start)}return!1})),t.input.addEventListener("mouseover",(function(e){e.preventDefault(),t.print_placeholder()})),t.input.addEventListener("mouseout",(function(e){e.preventDefault(),t.clear_placeholder()})),t.input.addEventListener("click",(function(e){if(0==t.value_length())return t.render(),t.caret.set(t.caret.start,t.caret.start),!1}))}}])&&s(e.prototype,n),t}();return e})()}));